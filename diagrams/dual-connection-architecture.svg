<svg width="800" height="500" xmlns="http://www.w3.org/2000/svg">
  <!-- Background -->
  <rect x="0" y="0" width="800" height="500" fill="#f9f9f9"/>
  
  <!-- Title -->
  <text x="400" y="40" font-family="Arial" font-size="24" text-anchor="middle" font-weight="bold">Dual-Device Connection Architecture</text>
  
  <!-- ESP32 Device -->
  <rect x="330" y="100" width="140" height="100" rx="10" ry="10" fill="#60a5fa" stroke="#2563eb" stroke-width="2"/>
  <text x="400" y="150" font-family="Arial" font-size="18" text-anchor="middle" fill="white" font-weight="bold">ESP32 Device</text>
  <text x="400" y="175" font-family="Arial" font-size="12" text-anchor="middle" fill="white">HID Keyboard Emulator</text>
  
  <!-- Target Device -->
  <rect x="580" y="250" width="160" height="120" rx="5" ry="5" fill="#d1d5db" stroke="#6b7280" stroke-width="2"/>
  <text x="660" y="290" font-family="Arial" font-size="18" text-anchor="middle">Target Device</text>
  <text x="660" y="315" font-family="Arial" font-size="12" text-anchor="middle">(Text Destination)</text>
  <rect x="600" y="330" width="120" height="25" rx="3" ry="3" fill="#e5e7eb" stroke="#9ca3af" stroke-width="1"/>
  <text x="660" y="347" font-family="Arial" font-size="10" text-anchor="middle">Text being typed</text>
  
  <!-- Controller Device -->
  <rect x="60" y="250" width="160" height="120" rx="5" ry="5" fill="#d1d5db" stroke="#6b7280" stroke-width="2"/>
  <text x="140" y="290" font-family="Arial" font-size="18" text-anchor="middle">Controller Device</text>
  <text x="140" y="315" font-family="Arial" font-size="12" text-anchor="middle">(Desktop App)</text>
  <rect x="80" y="330" width="120" height="25" rx="3" ry="3" fill="#e5e7eb" stroke="#9ca3af" stroke-width="1"/>
  <text x="140" y="347" font-family="Arial" font-size="10" text-anchor="middle">Text input source</text>
  
  <!-- Bluetooth Connection -->
  <line x1="400" y1="200" x2="400" y2="230" stroke="#000000" stroke-width="3"/>
  <line x1="400" y1="230" x2="580" y2="290" stroke="#000000" stroke-width="3"/>
  <text x="460" y="250" font-family="Arial" font-size="14" fill="#000000">Bluetooth HID Connection</text>
  <text x="460" y="270" font-family="Arial" font-size="12" fill="#4b5563">(Keyboard Emulation)</text>
  
  <!-- WiFi Connection -->
  <line x1="330" y1="150" x2="220" y2="150" stroke="#10b981" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="220" y1="150" x2="220" y2="250" stroke="#10b981" stroke-width="2" stroke-dasharray="5,5"/>
  <line x1="220" y1="250" x2="140" y2="250" stroke="#10b981" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="260" y="140" font-family="Arial" font-size="14" fill="#059669">WiFi Connection</text>
  <text x="260" y="160" font-family="Arial" font-size="12" fill="#4b5563">(Access Point)</text>
  
  <!-- Legend -->
  <rect x="580" y="100" width="20" height="10" fill="#000000"/>
  <text x="610" y="110" font-family="Arial" font-size="12">Bluetooth Connection</text>
  
  <rect x="580" y="130" width="20" height="10" fill="#10b981"/>
  <text x="610" y="140" font-family="Arial" font-size="12">WiFi Connection</text>
  
  <line x1="580" y1="160" x2="600" y2="160" stroke="#10b981" stroke-width="2" stroke-dasharray="5,5"/>
  <text x="610" y="163" font-family="Arial" font-size="12">Data Transfer</text>
  
  <!-- Notes -->
  <text x="400" y="420" font-family="Arial" font-size="14" text-anchor="middle" font-style="italic">Note: ESP32 maintains two simultaneous connections</text>
  <text x="400" y="445" font-family="Arial" font-size="14" text-anchor="middle" font-style="italic">Bluetooth HID connection to target + WiFi connection to controller</text>
</svg>
